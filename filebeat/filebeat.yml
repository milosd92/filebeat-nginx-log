filebeat:
  prospectors:
  - type: log
    paths:
      - /var/log/nginx/request-response.log
    tags: ["json"]
    json.keys_under_root: true
    processors:
    - decode_json_fields:
        fields: ["request", "response"]

  modules:
    - module: nginx
      access:
        var.paths: ["/var/log/nginx/access.log*"]
      error:
        var.paths: ["/var/log/nginx/error.log*"]

output:
  elasticsearch:
    hosts: ["elasticsearch:9200"]
    index: "filebeat-%{[beat.version]}-%{+yyyy.MM.dd}"
    username: "elastic"
    password: "changeme"

setup:
  kibana:
    host: "kibana:5601"

  template.name: "filebeat"
  template.pattern: "filebeat-*"